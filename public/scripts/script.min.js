function chooseWeapon(e) {
  rand = arr[Math.floor(3 * Math.random())];
  let t = document.getElementById("choice");
  (t.innerHTML = `<img src="../img/${e}.png"><img src="../img/${rand}.png">`),
    chooseFate(e, rand);
}
function chooseFate(e, t) {
  if (
    ("rock" === e && "scissors" === t) ||
    ("paper" === e && "rock" === t) ||
    ("scissors" === e && "paper" === t)
  ) {
    let e = document.getElementById("fate");
    (e.innerHTML = "이겼습니다."),
      tallyUp("win"),
      setTimeout(function () {
        foodrand();
      }, 100);
  } else if (
    ("rock" === e && "paper" === t) ||
    ("paper" === e && "scissors" === t) ||
    ("scissors" === e && "rock" === t)
  ) {
    let e = document.getElementById("fate");
    (e.innerHTML = "졌습니다."), tallyUp("lose");
  } else {
    let e = document.getElementById("fate");
    (e.innerHTML = "비겼습니다."), tallyUp("tie");
  }
  $(".gbtn").attr("disabled", !0), $(".rbtn").attr("disabled", !1);
}
function foodrand() {
  (rand = food[Math.floor(10 * Math.random())]),
    1 == confirm(`오늘의 점심은 ${rand} 입니다! \n메뉴를 저장 하시겠습니까?`) &&
      (foodSave.push(rand),
      $.ajax({
        url: "/foodsave/foodsave",
        method: "POST",
        data: { food: rand },
        success: function (e) {
          alert("저장된 메뉴는 마이페이지에 확인하실 수 있습니다.");
        },
        error: function (e) {
          alert("저장하려면 로그인이 필요합니다.");
        },
      }));
}
function tallyUp(e) {
  if ("win" === e) {
    let e = document.getElementById("wins");
    e.innerHTML = wins += 1;
  } else if ("lose" === e) {
    let e = document.getElementById("losses");
    e.innerHTML = losses += 1;
  } else {
    let e = document.getElementById("ties");
    e.innerHTML = ties += 1;
  }
}
function onKoreaShoot() {
  Math.random() < korea.percent
    ? (screen("고지방팀 : " + krTeam[0] + "선수가 슛에 성공했습니다."),
      updateKorScore())
    : screen("고지방팀 : " + krTeam[0] + " 선수가 슛에 실패했습니다.");
  var e = $("#kr-number");
  soccerGame.krScoreNumber--,
    e.html(soccerGame.krScoreNumber),
    disabledKrButton(!0),
    disabledJpButton(!1),
    $(".btn-reset").attr("disabled", !0);
}
function onJapenShoot() {
  krTeam.shift(),
    Math.random() < japen.percent
      ? (screen("저지방팀이 슛에 성공했습니다."), updateJpScore())
      : screen("저지방팀이 슛에 실패했습니다.");
  var e = $("#jp-number");
  soccerGame.jpScoreNumber--,
    e.html(soccerGame.jpScoreNumber),
    disabledKrButton(!1),
    disabledJpButton(!0),
    0 === soccerGame.jpScoreNumber &&
      (korea.score > japen.score
        ? (screen("고지방팀이 승리했습니다."),
          setTimeout(function () {
            foodrand();
          }, 100),
          $(".btn-reset").attr("disabled", !1))
        : korea.score < japen.score
        ? (screen("저지방팀이 승리했습니다."),
          $(".btn-reset").attr("disabled", !1))
        : (screen("비겼습니다."), $(".btn-reset").attr("disabled", !1)),
      disabledKrButton(!0),
      disabledJpButton(!0));
}
function screen(e) {
  var t = $("#score-text");
  t.html(e);
}
function updateKorScore() {
  var e = $("#kr-score");
  (korea.score += 1), e.html(korea.score);
}
function updateJpScore() {
  var e = $("#jp-score");
  (japen.score += 1), e.html(japen.score);
}
function disabledKrButton(e) {
  $(".btn-korea").prop("disabled", e);
}
function disabledJpButton(e) {
  $(".btn-japen").prop("disabled", e);
}
function onReset() {
  $(".btn-reset").attr("disabled", !1), $(".btn-korea").attr("disabled", !1);
  var e = $("#jp-score"),
    t = $("#kr-score"),
    n = $("#kr-number"),
    o = $("#jp-number");
  krTeam.push("국수", "김치찌개", "돈까스", "백반", "파스타"),
    (japen.score = 0),
    (korea.score = 0),
    e.html(japen.score),
    t.html(korea.score),
    (soccerGame.krScoreNumber = 5),
    (soccerGame.jpScoreNumber = 5),
    o.html(soccerGame.jpScoreNumber),
    n.html(soccerGame.krScoreNumber);
}
function alertPrize(e) {
  1 ==
    confirm(
      "오늘의 점심은 " + e.text + "입니다! \n메뉴를 저장 하시겠습니까?"
    ) &&
    (foodSave.push(e.text),
    $.ajax({
      url: "/foodsave/foodsave",
      method: "POST",
      data: { food: e.text },
      success: function (e) {
        alert("저장된 메뉴는 마이페이지에 확인하실 수 있습니다.");
      },
      error: function (e) {
        alert("저장하려면 로그인이 필요합니다.");
      },
    }));
}
function powerSelected(e) {
  0 == wheelSpinning &&
    ((document.getElementById("pw1").className = ""),
    (document.getElementById("pw2").className = ""),
    (document.getElementById("pw3").className = ""),
    e >= 1 && (document.getElementById("pw1").className = "pw1"),
    e >= 2 && (document.getElementById("pw2").className = "pw2"),
    e >= 3 && (document.getElementById("pw3").className = "pw3"),
    (wheelPower = e),
    (document.getElementById("spin_button").src = "./img/spin_on.png"),
    (document.getElementById("spin_button").className = "clickable"));
}
function startSpin() {
  0 == wheelSpinning &&
    (1 == wheelPower
      ? (theWheel.animation.spins = 3)
      : 2 == wheelPower
      ? (theWheel.animation.spins = 8)
      : 3 == wheelPower && (theWheel.animation.spins = 15),
    (document.getElementById("spin_button").src = "../img/spin_off.png"),
    (document.getElementById("spin_button").className = ""),
    theWheel.startAnimation(),
    (wheelSpinning = !0));
}
function resetWheel() {
  theWheel.stopAnimation(!1),
    (theWheel.rotationAngle = 0),
    theWheel.draw(),
    (document.getElementById("pw1").className = ""),
    (document.getElementById("pw2").className = ""),
    (document.getElementById("pw3").className = ""),
    (wheelSpinning = !1);
}
$(function () {
  var e = $(".next-btn"),
    t = $(".prev-btn"),
    n = $(".top-btn"),
    o = $(".bot-btn"),
    a = $(".prev-bot"),
    r = $(".prev-top"),
    s = $("article .si-z"),
    c = 0,
    l = 1;
  e.on("click", function () {
    var e = s.eq(c),
      t = s.eq(l);
    e.css({ left: 0 }).stop().animate({ left: "-100%" }),
      t.css({ left: "100%" }).stop().animate({ left: 0 }),
      (l += 1);
  }),
    t.on("click", function () {
      l -= 1;
      var e = s.eq(c),
        t = s.eq(l);
      e.css({ left: "100%" }).stop().animate({ left: 0 }),
        t.css({ left: 0 }).stop().animate({ left: "100%" });
    }),
    n.on("click", function () {
      l += 1;
      var e = s.eq(c),
        t = s.eq(l);
      e.css({ left: 0 }).stop().animate({ left: "-100%" }),
        t
          .css({ left: "100%", top: "-100%" })
          .stop()
          .animate({ left: 0, top: 0 }),
        $(".prev-btn").css("display", "none"),
        $(".prev-top").css("display", "block");
    }),
    o.on("click", function () {
      l += 2;
      var e = s.eq(c),
        t = s.eq(l);
      e.css({ left: 0 }).stop().animate({ left: "-100%" }),
        t
          .css({ left: "100%", bottom: "-100%" })
          .stop()
          .animate({ left: 0, bottom: 0 }),
        $(".prev-btn").css("display", "none"),
        $(".prev-bot").css("display", "block");
    }),
    r.on("click", function () {
      c += 3;
      var e = s.eq(c);
      e.css({ left: 0, top: 0 }).stop().animate({ left: "100%", top: "100%" }),
        (l = 2),
        (c = 0),
        $(".prev-btn").css("display", "block");
    }),
    a.on("click", function () {
      $(".prev-btn").css("display", "block"), (c += 4);
      var e = s.eq(c);
      e
        .css({ left: 0, bottom: 0 })
        .stop()
        .animate({ left: "100%", bottom: "100%" }),
        (l = 2),
        (c = 0);
    }),
    $("#login").click(function () {
      $("#login-wrap").fadeIn(), $("#login-content").animate({ top: "30%" });
    }),
    $(".close").click(function () {
      $("#login-wrap").fadeOut(), $("#login-content").animate({ top: "0" });
    }),
    $("html").click(function (e) {
      "login-wrap" === e.target.id &&
        ($("#login-wrap").fadeOut(), $("#login-content").animate({ top: "0" }));
    }),
    $("#join").click(function () {
      $("#join-wrap").fadeIn(), $("#join-content").animate({ top: "30%" });
    }),
    $(".close").click(function () {
      $("#join-wrap").fadeOut(), $("#join-content").animate({ top: "0" });
    }),
    $("html").click(function (e) {
      "join-wrap" === e.target.id &&
        ($("#join-wrap").fadeOut(), $("#join-content").animate({ top: "0" }));
    });
});
const arr = ["rock", "paper", "scissors"];
let food = [
    "김치찌개",
    "된장찌개",
    "불고기",
    "뼈해장국",
    "짬뽕",
    "짜장면",
    "백반",
    "파스타",
    "볶음밥",
    "돈까스",
  ],
  foodSave = [],
  rand = "",
  wins = 0,
  losses = 0,
  ties = 0;
$(".rbtn").click(function () {
  $(".gbtn").attr("disabled", !1), $(".rbtn").attr("disabled", !0);
});
var korea = { score: 0, percent: 0.7 },
  japen = { score: 0, percent: 0.7 },
  soccerGame = { jpScoreNumber: 5, krScoreNumber: 5 },
  krTeam = ["국수", "김치찌개", "돈까스", "백반", "파스타"];
let theWheel = new Winwheel({
    numSegments: 12,
    outerRadius: 212,
    textFontSize: 20,
    segments: [
      { fillStyle: "#3f297e", text: "된장찌개" },
      { fillStyle: "#1d61ac", text: "불고기" },
      { fillStyle: "#169ed8", text: "김치볶음밥" },
      { fillStyle: "#209b6c", text: "짬뽕" },
      { fillStyle: "#60b236", text: "순대국" },
      { fillStyle: "#efe61f", text: "생선구이" },
      { fillStyle: "#f7a416", text: "스파게티" },
      { fillStyle: "#e6471d", text: "비빔밥" },
      { fillStyle: "#e5177b", text: "어제먹은거" },
      { fillStyle: "#be107f", text: "돈카츠" },
      { fillStyle: "#881f7e", text: "라면" },
      { fillStyle: "#dc0936", text: "냉면" },
    ],
    animation: {
      type: "spinToStop",
      duration: 4,
      spins: 3,
      callbackFinished: alertPrize,
      soundTrigger: "pin",
    },
    pins: { number: 16 },
  }),
  wheelPower = 0,
  wheelSpinning = !1;
